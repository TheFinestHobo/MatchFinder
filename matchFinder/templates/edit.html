{% extends "layout.html" %}

{% block head %}
{{super()}}
<style> tr.hide-table-padding td {
  padding: 0;
}
</style>

{% endblock %}

{% block title %}Angelegte Daten{% endblock %}

{% block header %}Angelegte Daten{% endblock %}

{% block body %}

{% if teilnehmer_lists %}

<h4>Teilnehmer-Listen</h4>
<div class="table-responsive mb-3">
	<table class="table table-striped table-sm">
		<thead>
			<tr>
				<th style="width: 10%">#</th>
				<th style="width: 78%">Name</th>
				<th style="width: 12%">Aktion</th>
			</tr>
		</thead>
		<tbody>
			{% for teilnehmer_list in teilnehmer_lists %}
			<tr data-toggle="collapse" data-target="#subtable_teilnehmer_{{teilnehmer_list.id}}" class="clickable">
				<td>{{teilnehmer_list.id}}</td>
				<td>{{teilnehmer_list.name}}</td>
				<td>
					<form method=post action="{{ url_for('edit.delete') }}" enctype=multipart/form-data>
						<input id="delete" name="delete" class="btn btn-sm btn-danger" type="submit" value="Löschen">
						<input type="hidden" id="id" name="id" value='{"type":"teilnehmer","id":"{{teilnehmer_list.id}}"}'>
					</form>
				</td>
			</tr>
			<tr class="hide-table-padding">
				<td colspan="3">
					<div id="subtable_teilnehmer_{{teilnehmer_list.id}}" class="collapse">
						<table class="table table-striped" tyle="width:100%">
							<thead>
								<tr>
									<th style="width: 10%">#</th>
									<th style="width: 20%">Matr.Nr</th>
									<th style="width: 35%">Nachname</th>
									<th style="width: 35%">Vorname</th>
								</tr>
							</thead>
							<tbody>
								{% for teil in teilnehmer %}
								{% if teil.list_id == teilnehmer_list.id %}
								<tr>
									<td>{{teil.id}}</td>
									<td>{{teil.matr_nr}}</td>
									<td>{{teil.last_name}}</td>
									<td>{{teil.first_name}}</td>
								</tr>
								{% endif %}
								{% endfor %}
							</tbody>
						</table>
					</div>
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>
{% endif %}

{% if thema_lists %}

<h4>Gruppen-Listen</h4>
<div class="table-responsive mb-3">
	<table class="table table-striped table-sm">
		<thead>
			<tr>
				<th style="width: 10%">#</th>
				<th style="width: 78%">Name</th>
				<th style="width: 12%">Aktion</th>
			</tr>
		</thead>
		<tbody>

			{% for thema_list in thema_lists %}

			<tr data-toggle="collapse" data-target="#subtable_thema_{{thema_list.id}}" class="clickable">
				<td>{{thema_list.id}}</td>
				<td>{{thema_list.name}}</td>
				<td>
					<form method=post action="{{ url_for('edit.delete') }}" enctype=multipart/form-data>
						<input id="delete" name="delete" class="btn btn-sm btn-danger" type="submit" value="Löschen">
						<input type="hidden" id="id" name="id" value='{"type":"thema","id":"{{thema_list.id}}"}'>
					</form>
				</td>
			</tr>
			<tr class="hide-table-padding">
				<td colspan="3">
					<div id="subtable_thema_{{thema_list.id}}" class="collapse">
						<table class="table table-striped" tyle="width:100%">
							<thead>
								<tr>
									<th style="width: 10%">#</th>
									<th style="width: 30%">Name</th>
									<th style="width: 30%">Betreuer</th>
									<th style="width: 30%">Zeit</th>
								</tr>
							</thead>
							<tbody>

								{% for thema in themen %}

								{% if thema.list_id == thema_list.id %}

								<tr>
									<td>{{thema.id}}</td>
									<td>{{thema.thema_name}}</td>
									<td>{{thema.betreuer}}</td>
									<td>{{thema.zeit}}</td>
								</tr>

								{% endif %}

								{% endfor %}

							</tbody>
						</table>
					</div>
				</td>
			</tr>

			{% endfor %}

		</tbody>
	</table>
</div>

{% endif %}

{% if verteilungen %}

<h4>Verteilungen</h4>
<div class="table-responsive mb-3">
	<table class="table table-striped table-sm">
		<thead>
			<tr>
				<th style="width: 8%">#</th>
				<th style="width: 31%">Teilnehmer-Liste</th>
				<th style="width: 31%">Themen-Liste</th>
				<th style="width: 15%">Beteiligung</th>
				<th style="width: 15%">Aktion</th>
			</tr>
		</thead>
		<tbody>

			{% for verteilung in verteilungen %}

			<tr>
				<td>{{verteilung.id}}</td>
				<td>{{verteilung.teilnehmer.name}}</td>
				<td>{{verteilung.thema_list.name}}</td>
				<td>{{verteilung.praeferenzen | length}} / {{verteilung.teilnehmer.teilnehmer | length}}</td>
				<td>
					<form method=post action="{{ url_for('edit.delete') }}" enctype=multipart/form-data>
						<input id="share" name="share" class="btn btn-sm btn-primary" type="submit" value="Teilen">
						<input id="delete" name="delete" class="btn btn-sm btn-danger" type="submit" value="Löschen">
						<input type="hidden" id="id" name="id" value='{"type":"verteilung","id":"{{verteilung.id}}"}'>
					</form>
				</td>
			</tr>

			{% endfor %}

		</tbody>
	</table>
</div>

{% endif %}

{% endblock %}