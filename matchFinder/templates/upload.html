{% extends "layout.html" %}
{% block head %}
{{super()}}
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
{% endblock %}
{% block title %}Zuordnung erstellen{% endblock %}

{% block header %}Zuordnung erstellen{% endblock %}

{% block body %}
<p>
	Zuordnungen können auf mehreren Wegen erstellt werden.
</p>
<div class="mb-4">
	<h5 class="mb-3">Bereits angegebene Präferenzen in .csv Format hochladen</h5>
	<div class="col-6">
		<div class="form-row align-items-center">
			<form method=post action="{{ url_for('results.present') }}" enctype=multipart/form-data>
				<div class="mb-2">
					<input class='button mb' type=file name=file accept=".txt,.csv" required>
				</div>
				<input class="btn btn-primary" type=submit value=Erstellen>
			</form>
		</div>
	</div>
</div>
{% if (topics|length > 0) and (members|length > 0) %}
<div class="mb-3">
	<h5>Von bestehenden Daten</h5>
	<form method=post action="{{ url_for('share.index') }}" enctype=multipart/form-data>
		<div class="col-6">
			<div class="form-row align-items-center">
				<label class="mr-sm-2" for="members">Teilnehmerliste auswählen:</label>
				<select class="custom-select mr-sm-2" name="members" id="members">
					{% for member_list in members %}
					<option value="{{member_list.name}}">{{member_list.name}}</option>
					{% endfor %}
				</select>
				<label class="mr-sm-2" for="topics">Gruppenliste auswählen:</label>
				<select class="custom-select mr-sm-2 mb-2" name="topics" id="topics">
					{% for topic in topics %}
					<option value="{{topic.name}}">{{topic.name}}</option>
					{% endfor %}
				</select>
				<input class="btn btn-primary" type="submit" value="Submit">
			</div>
		</div>
	</form>
</div>
{% endif %}
{% block scripts %}
<script>
	$('#inputGroupFile01').on('change',function() {
		//get the file name
		var fileName = $(this).val();
		//replace the "Choose a file" label
		$(this).next('.custom-file-label').html(fileName);
	})
</script>
{% endblock %}
{% endblock %}